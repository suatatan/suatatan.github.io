<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8" />
    <title>Jaccard Benzerlik Hesaplayıcısı</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React UMD -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel: TSX/JSX'i tarayıcıda derlemek için -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel" data-presets="typescript,react">
      const { useState, useEffect } = React;

      // İkon yerine basit span kullanalım:
      const Icon = ({ label }) => (
        <span className="inline-block px-2 py-1 text-xs rounded bg-gray-100 border mr-2">{label}</span>
      );

      const JaccardSimilarityCalculator = () => {
        const [text1, setText1] = useState('');
        const [text2, setText2] = useState('');
        const [result, setResult] = useState(null);

        const calculateJaccard = (str1, str2) => {
          if (!str1 || !str2) return null;
          const set1 = new Set(str1.toLowerCase().split(''));
          const set2 = new Set(str2.toLowerCase().split(''));
          const intersection = new Set([...set1].filter(x => set2.has(x)));
          const union = new Set([...set1, ...set2]);
          const similarity = union.size === 0 ? 0 : intersection.size / union.size;
          return {
            set1: Array.from(set1),
            set2: Array.from(set2),
            intersection: Array.from(intersection),
            union: Array.from(union),
            similarity,
            intersectionSize: intersection.size,
            unionSize: union.size
          };
        };

        useEffect(() => { setResult(calculateJaccard(text1, text2)); }, [text1, text2]);

        const examples = [
          { text1: "kitap", text2: "kalem", label: "Basit Kelimeler" },
          { text1: "merhaba", text2: "selam", label: "Selamlaşma" },
          { text1: "istanbul", text2: "ankara", label: "Şehir Adları" },
          { text1: "matematik", text2: "geometri", label: "Bilim Dalları" }
        ];

        return (
          <div className="max-w-4xl mx-auto p-6">
            <div className="bg-white rounded-xl shadow-lg p-8">
              <div className="text-center mb-8">
                <div className="flex items-center justify-center mb-4">
                  <Icon label="Calc" />
                  <h1 className="text-3xl font-bold text-gray-800">Jaccard Benzerlik Hesaplayıcısı</h1>
                </div>
                <p className="text-gray-600">İki metni karakter bazında karşılaştırarak benzerlik oranını hesaplayın</p>
              </div>

              <div className="bg-blue-50 rounded-lg p-4 mb-6">
                <div className="flex items-center mb-2">
                  <Icon label="Formül" />
                  <h3 className="font-semibold text-blue-800">Jaccard Benzerlik Formülü</h3>
                </div>
                <div className="text-center text-lg font-mono bg-white rounded p-3 mb-2">
                  J(A,B) = |A ∩ B| / |A ∪ B|
                </div>
                <p className="text-sm text-blue-700">
                  <strong>A ∩ B:</strong> İki kümenin kesişimi (ortak karakterler)<br/>
                  <strong>A ∪ B:</strong> İki kümenin birleşimi (tüm benzersiz karakterler)<br/>
                  <strong>Sonuç:</strong> 0 ile 1 arasında
                </p>
              </div>

              <div className="grid md:grid-cols-2 gap-4 mb-6">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">Birinci Metin (A)</label>
                  <input
                    type="text" value={text1} onChange={(e) => setText1(e.target.value)}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Karşılaştırılacak ilk metni girin..."
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">İkinci Metin (B)</label>
                  <input
                    type="text" value={text2} onChange={(e) => setText2(e.target.value)}
                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="Karşılaştırılacak ikinci metni girin..."
                  />
                </div>
              </div>

              <div className="mb-6">
                <h3 className="font-semibold text-gray-700 mb-3">Örnek Veriler:</h3>
                <div className="flex flex-wrap gap-2">
                  {examples.map((ex, i) => (
                    <button key={i} onClick={() => { setText1(ex.text1); setText2(ex.text2); }}
                      className="px-3 py-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 rounded-full text-sm transition-colors">
                      {ex.label}
                    </button>
                  ))}
                </div>
              </div>

              {result && (
                <div className="space-y-6">
                  <div className="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 text-center">
                    <h3 className="text-xl font-semibold text-gray-800 mb-2">Jaccard Benzerlik Oranı</h3>
                    <div className="text-4xl font-bold text-blue-600 mb-2">{(result.similarity * 100).toFixed(1)}%</div>
                    <div className="text-lg text-gray-600">
                      {result.intersectionSize} ÷ {result.unionSize} = {result.similarity.toFixed(3)}
                    </div>
                  </div>

                  <div className="grid md:grid-cols-3 gap-4">
                    <div className="bg-red-50 rounded-lg p-4">
                      <h4 className="font-semibold text-red-800 mb-2">Küme A: "{text1}"</h4>
                      <div className="flex flex-wrap gap-1">
                        {result.set1.map((c, i) => (
                          <span key={i}
                            className={`px-2 py-1 rounded text-sm font-mono ${result.intersection.includes(c) ? 'bg-green-200 text-green-800' : 'bg-red-200 text-red-800'}`}>
                            {c}
                          </span>
                        ))}
                      </div>
                      <p className="text-xs text-red-600 mt-2">{result.set1.length} benzersiz karakter</p>
                    </div>

                    <div className="bg-green-50 rounded-lg p-4">
                      <h4 className="font-semibold text-green-800 mb-2">A ∩ B (Kesişim)</h4>
                      <div className="flex flex-wrap gap-1">
                        {result.intersection.length ? result.intersection.map((c, i) => (
                          <span key={i} className="px-2 py-1 bg-green-200 text-green-800 rounded text-sm font-mono">{c}</span>
                        )) : <span className="text-gray-500 text-sm">Ortak karakter yok</span>}
                      </div>
                      <p className="text-xs text-green-600 mt-2">{result.intersectionSize} ortak karakter</p>
                    </div>

                    <div className="bg-blue-50 rounded-lg p-4">
                      <h4 className="font-semibold text-blue-800 mb-2">Küme B: "{text2}"</h4>
                      <div className="flex flex-wrap gap-1">
                        {result.set2.map((c, i) => (
                          <span key={i}
                            className={`px-2 py-1 rounded text-sm font-mono ${result.intersection.includes(c) ? 'bg-green-200 text-green-800' : 'bg-blue-200 text-blue-800'}`}>
                            {c}
                          </span>
                        ))}
                      </div>
                      <p className="text-xs text-blue-600 mt-2">{result.set2.length} benzersiz karakter</p>
                    </div>
                  </div>

                  <div className="bg-purple-50 rounded-lg p-4">
                    <h4 className="font-semibold text-purple-800 mb-2">A ∪ B (Birleşim)</h4>
                    <div className="flex flex-wrap gap-1">
                      {result.union.map((c, i) => (
                        <span key={i} className="px-2 py-1 bg-purple-200 text-purple-800 rounded text-sm font-mono">{c}</span>
                      ))}
                    </div>
                    <p className="text-xs text-purple-600 mt-2">{result.unionSize} toplam benzersiz karakter</p>
                  </div>

                  <div className="bg-yellow-50 rounded-lg p-4">
                    <div className="flex items-start">
                      <Icon label="Bilgi" />
                      <div className="ml-2">
                        <h4 className="font-semibold text-yellow-800 mb-2">Sonuç Yorumu</h4>
                        <p className="text-yellow-700 text-sm">
                          {result.similarity === 0 && "Bu iki metin tamamen farklı karakterlerden oluşuyor."}
                          {result.similarity > 0 && result.similarity < 0.3 && "Bu iki metin birbirine çok az benziyor."}
                          {result.similarity >= 0.3 && result.similarity < 0.6 && "Bu iki metin orta düzeyde benziyor."}
                          {result.similarity >= 0.6 && result.similarity < 0.9 && "Bu iki metin oldukça benziyor."}
                          {result.similarity >= 0.9 && result.similarity < 1 && "Bu iki metin çok benziyor."}
                          {result.similarity === 1 && "Bu iki metin tamamen aynı karakterleri içeriyor."}
                        </p>
                      </div>
                    </div>
                  </div>

                </div>
              )}
            </div>
          </div>
        );
      };

      ReactDOM.createRoot(document.getElementById('root')).render(<JaccardSimilarityCalculator />);
    </script>
  </body>
</html>
